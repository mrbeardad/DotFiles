" åœ¨å¼€å¤´è®¾ç½®æ­¤é¡¹æ‰èƒ½æˆåŠŸ
cs add ~/Projects/cscope.out
filetype plugin indent on       " è®¾ç½®åŠ è½½å¯¹åº”æ–‡ä»¶ç±»å‹çš„æ’ä»¶
syntax enable                   " å¼€å¯è¯­æ³•é«˜äº®åŠŸèƒ½
syntax on                       " è‡ªåŠ¨è¯­æ³•é«˜äº®

set nocompatible                " è®¾ç½®ä¸å…¼å®¹åŸå§‹viæ¨¡å¼
set ignorecase                  " æœç´¢æ—¶å¿½ç•¥å¤§å°å†™
set smartcase                   " æœç´¢æ—¶æœ‰å¤§å†™æ‰å¤§å°å†™æ•æ„Ÿ
set hlsearch                    " æœç´¢é«˜äº®
set incsearch                   " æœç´¢æ—¶åŠæ—¶è·³è½¬
set nowrapscan                  " æœç´¢åˆ°å¤´ä¸è‡ªåŠ¨æŠ˜è¿”å†æœç´¢
set nu                          " æ˜¾ç¤ºå½“å‰è¡Œå·
set rnu                         " æ˜¾ç¤ºç›¸å¯¹è¡Œå·
set laststatus=2                " æ˜¾ç¤ºçŠ¶æ€æ 
set noshowmode                  " ä¸æ˜¾ç¤ºå½“å‰æ¨¡å¼ï¼ŒAirlineä¼šæ˜¾ç¤º
set noruler                     " ä¸æ˜¾ç¤ºå…‰æ ‡å½“å‰ä½ç½®ï¼ŒAirlineä¼šæ˜¾ç¤º
set showcmd                     " æ˜¾ç¤ºå½“å‰æœªå®Œæˆå‘½ä»¤çš„æŒ‰é”®
set cmdheight=1                 " è®¾ç½®å‘½ä»¤è¡Œçš„é«˜åº¦
set list                        " æ˜¾ç¤ºç©ºç™½ç¬¦
set listchars=tab:â–¸\ ,trail:Â·,extends:â†·,precedes:â†¶      " è®¾ç½®ç©ºç™½ç¬¦å¦‚ä½•æ˜¾ç¤º
set lazyredraw                  " å…³é—­ä¸å¿…è¦çš„å±å¹•é‡ç»˜
set wildmenu                    " å‘½ä»¤è¡Œè¡¥å…¨æ–‡ä»¶å
set wildignorecase              " è¡¥å…¨å¿½ç•¥å¤§å°å†™
set showmatch                   " å·¦æ‹¬å·åŒ¹é…ï¼Œæ— åˆ™å“é“ƒ
set matchtime=0                 " æ‹¬å·åŒ¹é…æ—¶é—´ï¼Œå•ä½0.1s
set wrap                        " é•¿è¡Œå›ç»•è€Œéè¶…å±
" set linebreak                 " å›ç»•æ—¶é¿å…æ–­è¯
set scrolloff=7                 " ä¿æŒ5è¡Œå§‹ç»ˆåœ¨å…‰æ ‡ä¹‹ä¸‹æˆ–ä¹‹ä¸Š
set autochdir                   " è‡ªåŠ¨åˆ‡æ¢å·¥ä½œç›®å½•
set mouse=a                     " å¯ç”¨é¼ æ ‡
set path=/usr/include/          " è®¾ç½®PATHç›®å½•æ–¹ä¾¿è·³è½¬
set whichwrap=<,>,[,]           " å…è®¸æ’å…¥æ¨¡å¼ä¸æ™®é€šæ¨¡å¼å…‰æ ‡åœ¨ä»é¦–å°¾è·¨è¡Œ
set backspace=indent,eol,start  " å…è®¸<BS>é”®åœ¨æ’å…¥æ¨¡å¼åˆ é™¤ï¼šè¡Œé¦–ç©ºç™½ç¬¦ã€æ¢è¡Œç¬¦ã€è¿›å…¥æ’å…¥æ¨¡å¼æ—¶å…‰æ ‡ä¹‹å‰çš„å­—ç¬¦
set virtualedit=block,onemore   " å…‰æ ‡å¯å‡ºç°åœ¨æ— å­—ç¬¦ç©ºé—´ï¼šå—é€‰å–æ¨¡å¼ï¼Œå…¶å®ƒæ¨¡å¼æœ€å¤šåªå…è®¸å‡ºç°åœ¨æœ€åä¸€ä¸ªå­—ç¬¦ä¹‹åçš„ä½ç½®
set hidden                      " åˆ‡æ¢tabæ—¶è‡ªåŠ¨éšè—å½“å‰buffer
set previewheight=15            " è®¾ç½®previewçª—å£çš„é«˜åº¦
set foldmethod=manual           " è®¾ç½®æŠ˜å æ–¹å¼
set nofoldenable                " å¯åŠ¨vimæ—¶ä¸å¼€å¯æŠ˜å 
set autoindent                  " åŸºäºä¸Šè¡Œçš„ç¼©è¿›
set tabstop=8                   " é»˜è®¤çš„tabå®½ï¼Œä¸è¶³åˆ™ä¸ºç©ºæ ¼
set softtabstop=4               " é”®å…¥çš„tabå®½
set shiftwidth=4                " ç¼©è¿›çš„tabå®½
set expandtab                   " ç”¨ç©ºæ ¼ä»£æ›¿tabï¼Œ:retabæ¢å¤æœ¬è¡Œ


" è¯»å–ç¼“å†²åŒºæ—¶å›åˆ°ä¸Šæ¬¡ç¦»å¼€æ—¶çš„ä½ç½®
autocmd BufReadPost * if line("'\"") > 1 && line("'\"") <= line("$") | exe "normal! g'\"" | endif

" å†™å…¥vimrcæ—¶è‡ªåŠ¨è¯»å–é…ç½®ï¼Œå¢åŠ ++nestedä»¥è§£å†³Airlineå†™å›æ–‡ä»¶æ—¶å¯¼è‡´çš„é¢œè‰²å¤±è°ƒé—®é¢˜ï¼Œä¸è‡ªåŠ¨reload gvimrcï¼ˆå¡é¡¿ï¼‰
autocmd BufWritePost $MYVIMRC ++nested source $MYVIMRC

" è¯»å–vimå‘½ä»¤è¡Œçš„è¾“å‡ºåˆ°å½“å‰æ–‡ä»¶ç¼“å†²åŒº
command! -nargs=* Rcmd :let tmp=<q-args> | put =execute(tmp)

" sudoå†™å…¥æ–‡ä»¶
command! W execute 'w !sudo tee % > /dev/null' <bar> edit!

" è‹¥å¤–å±‚ä¸ºtmuxï¼Œåˆ™å¯é€‚å½“é™ä½ç­‰å¾…å»¶è¿Ÿï¼Œå› ä¸ºtmuxå·²ç»å¤„ç†äº†æŒ‰é”®å»¶è¿Ÿçš„é—®é¢˜
if $TMUX != ''
    set ttimeoutlen=20
else
    set ttimeoutlen=50
endif


"================================
" => è®¾ç½®ä¸´æ—¶æ–‡ä»¶
"================================
set viminfo='100,<50,s10,h,n$HOME/.vim/viminfo
set history=1000
set noswapfile
set nobackup
set undofile


"================================
" => Bufferåˆ‡æ¢
"================================
nnoremap <silent> <space>n :bn<CR>
nnoremap <silent> <space>b :bp<CR>


"================================
" => Tabåˆ‡æ¢
"================================
nnoremap <silent> <leader>n :tabnext<CR>
nnoremap <silent> <leader>b :tabprevious<CR>
nnoremap <silent> <leader>1 :tabnext 1<CR>
nnoremap <silent> <leader>2 :tabnext 2<CR>
nnoremap <silent> <leader>3 :tabnext 3<CR>
nnoremap <silent> <leader>4 :tabnext 4<CR>
nnoremap <silent> <leader>5 :tabnext 5<CR>


"================================
" => Windowåˆ‡æ¢
"================================
function! Jump(i) abort
    if winnr('$') >= a:i
        exe a:i . 'wincmd w'
    endif
endfunction
nnoremap <silent> <space>1 :call Jump(1)<CR>
nnoremap <silent> <space>2 :call Jump(2)<CR>
nnoremap <silent> <space>3 :call Jump(3)<CR>
nnoremap <silent> <space>4 :call Jump(4)<CR>
nnoremap <silent> <space>5 :call Jump(5)<CR>


"================================
" => æ™®é€šæ¨¡å¼å¿«æ·é”®
"================================
nnoremap  7
nnoremap  7
nnoremap  0
nnoremap  $
nnoremap <silent> , vy
nnoremap <silent> Y y$
nnoremap <silent> <space>o  :<c-u>put =repeat(nr2char(10), v:count1)<CR><up>
nnoremap <silent> <space>O  :<c-u>put! =repeat(nr2char(10), v:count1)<CR><down>
nnoremap <silent> <Leader>h :nohl<CR>
nnoremap <leader>m  :<c-u><c-r><c-r>='let @'. v:register .' = '. string(getreg(v:register))<cr><c-f><left>

function! ToggleWrap()
    if &wrap == 1
        setl nowrap
    else
        setl wrap
    endif
endfunction
nnoremap <silent> <Leader>w :call ToggleWrap()<CR>

function! ToggleVirtuledit()
    if &Virtuledit =~ "all"
        setl virtualedit=block,onemore
    else
        setl virtualedit=all
    endif
endfunction
nnoremap <silent> <leader>v :call ToggleVirtuledit()<CR>


"================================
" => æ’å…¥æ¨¡å¼å¿«æ·é”®
"================================
inoremap  <home>
inoremap  <end>
nnoremap  5
nnoremap  5
inoremap  d^
inoremap  d$


"================================
" => å‘½ä»¤æ¨¡å¼å¿«æ·é”®
"================================
cnoremap  


"================================
" => å¯è§†æ¨¡å¼å¿«æ·é”®
"================================
vnoremap  0
vnoremap  $
vnoremap  "+y


"================================
" => ç»ˆç«¯VIMçš„é…ç½®
"================================
if !has("gui_running")

    colorscheme ron

    " æ’å…¥æ¨¡å¼ä¸æ™®é€šæ¨¡å¼çš„å…‰æ ‡å½¢çŠ¶åˆ‡æ¢
    let &t_SI = "\e[6 q"
    let &t_EI = "\e[2 q"
    " å…¶ä»–é€‰é¡¹ï¼ˆæ›¿æ¢\ _ [åï¼‰çš„æ•°å­—ï¼š
    " Ps = 0  -> blinking block.
    " Ps = 1  -> blinking block (default).
    " Ps = 2  -> steady block.
    " Ps = 3  -> blinking underline.
    " Ps = 4  -> steady underline.
    " Ps = 5  -> blinking bar (xterm).
    " Ps = 6  -> steady bar (xterm).
endif


"================================
" => Cscopeå¿«æ·é”®
"================================
set cscopeprg=/usr/bin/cscope
" set nocst
set cscopequickfix=s-,c-,d-,i-,t-,e-,a-
nnoremap  <silent> <space>cs :cscope find s  <c-r>=expand('<cword>')<cr><cr>
nnoremap  <silent> <space>ca :cscope find a  <c-r>=expand('<cword>')<cr><cr>
nnoremap  <silent> <space>cg :cscope find g  <c-r>=expand('<cword>')<cr><cr>
nnoremap  <silent> <space>cc :cscope find c  <c-r>=expand('<cword>')<cr><cr>
nnoremap  <silent> <space>ct :cscope find t  <c-r>=expand('<cword>')<cr><cr>
nnoremap  <silent> <space>ce :cscope find e  <c-r>=expand('<cword>')<cr><cr>
nnoremap  <silent> <space>cf :cscope find f  <c-r>=expand('<cfile>')<cr><cr>
nnoremap  <silent> <space>ci :cscope find i ^<c-r>=expand('<cfile>')<cr>$<cr>
nnoremap  <silent> <space>cd :cscope find d  <c-r>=expand('<cword>')<cr><cr>
nnoremap  <silent> <space>cr :cd ~/Projects<CR>:AsyncRun cscope -qbR<CR>:call asyncrun#quickfix_toggle(6)<CR>:cs reset<CR>
command! Csh :echo "
            \ \n s   symbol    ï¼šæŸ¥æ‰¾è¯¥ç¬¦å·çš„å¼•ç”¨
            \ \n g   global    ï¼šæŸ¥æ‰¾è¯¥ç¬¦å·çš„å®šä¹‰
            \ \n a   assign    ï¼šæŸ¥æ‰¾è¯¥ç¬¦å·è¢«èµ‹å€¼çš„ä½ç½®
            \ \n c   calls     ï¼šæŸ¥æ‰¾è°ƒç”¨å½“å‰å‡½æ•°çš„ä½ç½®
            \ \n d   depends   ï¼šæŸ¥æ‰¾å½“å‰å‡½æ•°è°ƒç”¨çš„å‡½æ•°
            \ \n t   text      ï¼šæŸ¥æ‰¾å‡ºç°è¯¥å­—ç¬¦ä¸²çš„ä½ç½®
            \ \n e   egrep     ï¼šä½¿ç”¨ egrep æœç´¢å½“å‰å•è¯
            \ \n f   file      ï¼šæ‰“å¼€æ–‡ä»¶å
            \ \n i   includes  ï¼šæŸ¥è¯¢å¼•å…¥äº†å½“å‰æ–‡ä»¶çš„æ–‡ä»¶
            \"


"================================
" => vim-plugé…ç½®
"================================
call plug#begin('~/.vim/plugged')

Plug 'mhinz/vim-startify', { 'on': [] }
Plug 'vim-airline/vim-airline'
Plug 'vim-airline/vim-airline-themes'
Plug 'kien/rainbow_parentheses.vim', { 'on': [] }
Plug 'Yggdroot/indentLine', { 'on': [] }
Plug 'mbbill/undotree'
Plug 'jiangmiao/auto-pairs'
Plug 'octol/vim-cpp-enhanced-highlight', { 'on': [] }
Plug 'majutsushi/tagbar', { 'on': [] }
Plug 'preservim/nerdtree', { 'on': [] }
Plug 'preservim/nerdcommenter'
Plug 'tiagofumo/vim-nerdtree-syntax-highlight', { 'on': [] }
Plug 'SirVer/ultisnips', { 'on': [] }
Plug 'honza/vim-snippets', { 'on': [] }
Plug 'dense-analysis/ale', { 'on': [] }
Plug 'https://gitee.com/mirrors/youcompleteme.git', { 'on': [] }
Plug 'skywind3000/asyncrun.vim', { 'on': [] }
Plug 'kana/vim-textobj-user'
Plug 'kana/vim-textobj-indent'
Plug 'kana/vim-textobj-syntax'
Plug 'kana/vim-textobj-function', { 'for':['c', 'cpp', 'vim', 'java'] }
Plug 'sgur/vim-textobj-parameter'
Plug 'vim-scripts/fcitx.vim'
Plug 'ryanoasis/vim-devicons'
Plug 'tpope/vim-fugitive'
" Plug 'jaxbot/selective-undo.vim'

call plug#end()


"================================
" => Deviconsæ’ä»¶çš„é…ç½®
"================================
let g:webdevicons_enable_startify = 1
let g:webdevicons_enable_airline_tabline = 1
let g:webdevicons_enable_airline_statusline = 1
let g:webdevicons_enable_nerdtree = 1


"================================
" => Airlineé…ç½®
"================================
let g:airline_theme="behelit"   " night_owl papercolor vice solorized behelit
let g:airline_powerline_fonts = 1
let g:airline_detect_spell=0
let g:airline_extensions = ['branch', 'tabline']
let g:airline_filetype_overrides = { 'tagbar': [ 'Tagbar', '' ], 'undotree': ['UndoTree', ''] }



"================================
" => IndentLineé…ç½®
"================================
let g:indentLine_fileType = ['c', 'cpp']
nnoremap <silent> <leader>il :IndentLinesToggle<CR>


"================================
" => Undotreeé…ç½®
"================================
nnoremap <silent> <F4> :UndotreeToggle<CR>
